<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: @@graph/wrappers/Wrapper.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: @@graph/wrappers/Wrapper.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {Canvas} from '@@graph/handlers';
import { mergeRight } from 'ramda';

export class Wrapper {
  // nodeType denotes the type of the node from AntD to use when rendering this object --> e.g. wrapped as a text
  static nodeType = 'text';

  // Default styling of components to be applied for this wrapper
  defaultStyle = {};
  styles = {};
  state = {selected: false};
  lastState = {};
  style = {};
  handler = Canvas;

  constructor(id) {
    this.id = id;
  }


  /**
   * Sets the wrappers node in the @@graph (the @@graph's representation of the node).
   * @param node
   */
  setNode(node) {
    this.node = node;
    this.resetStyle();
    this.handler.preregisterResource(node.get('data'), this.id);
    this.handler.subscribeToChanges(this.id, this);
  };

  getNode() {
    return this.node;
  }

  getData() {
    return this.getNode().get('data');
  }

  /**
   * Sets container node --> properties &amp; other wrappers can reference the container they are a part of.
   * @param containerNode
   */
  setContainerNode(containerNode) {
    this.containerNode = containerNode;
  }

  getContainerNode() {
    return this.containerNode;
  }

  getGroupController() {
    return this.containerNode &amp;&amp; this.containerNode.getContainer().get('wrapper');
  }

  onHover() {
    this.setState({hover: true});
  }

  onBlur() {
    this.setState({hover: false});
  }

  setState(state) {
    const lastState = this.state;
    this.state = mergeRight(this.state, state);
    this.callOnParent('stateChanged', {target: this, state: this.state, lastState});
    this.updateStyles();
  }

  resetStyle() {
    this.getNode().attr(this.defaultStyle);
  }

  updateTargetStyle(style) {
    this.getNode().attr(style);
  }

  updateStyles = () => {
    const style = Object.entries(this.state).reduce((acc, [key, value]) => Object.assign(acc, value ? this.styles[key] : {}), {...this.defaultStyle});
    this.updateTargetStyle(style);
  }

  onClick() {
    this.onToggleSelect(!this.state.selected);
  }

  onToggleSelect(selected) {
    this.state.selected = typeof selected === 'undefined' ? !this.state.selected : selected;
    this.handler.onToggleSelect(this.id, this.state.selected);
  }

  callOnParent(methodName, ...args) {
    const controller = this.getGroupController();
    if (controller &amp;&amp; controller[methodName]) {
      controller[methodName](...args);
    }
  }

  onStateChanged(state) {
    if (state &amp;&amp; state !== this.__lastState) {
      this.setState(state);
      this.__lastState = state;

      return true;
    }

    return false;
  };
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="@@actions_load.module_js.html">@@actions/load.js</a></li><li><a href="@@actions_load-human-readable.module_js.html">@@actions/load-human-readable.js</a></li><li><a href="@@actions_yasgui.module_js.html">@@actions/yasgui.js</a></li><li><a href="index.module_js.html">index.js</a></li><li><a href="module-@@actions_custom-prefix.html">@@actions/custom-prefix</a></li><li><a href="module-@@actions_lifecycle.html">@@actions/lifecycle</a></li><li><a href="module-@@actions_save.html">@@actions/save</a></li><li><a href="module-@@actions_solid_auth.html">@@actions/solid/auth</a></li><li><a href="module-@@actions_solid_files.html">@@actions/solid/files</a></li><li><a href="module-@@actions_solid_lifecycle.html">@@actions/solid/lifecycle</a></li><li><a href="module-@@actions_solid_share.html">@@actions/solid/share</a></li><li><a href="module-@@api.html">@@api</a></li><li><a href="module-@@api_labels-parsing.html">@@api/labels-parsing</a></li><li><a href="module-@@app-state_controls.html">@@app-state/controls</a></li><li><a href="module-@@app-state_index.html">@@app-state/index</a></li><li><a href="module-@@app-state_initial.html">@@app-state/initial</a></li><li><a href="module-@@app-state_model_middleware.html">@@app-state/model/middleware</a></li><li><a href="module-@@app-state_model_state.html">@@app-state/model/state</a></li><li><a href="module-@@app-state_settings.html">@@app-state/settings</a></li><li><a href="module-@@app-state_solid.html">@@app-state/solid</a></li><li><a href="module-@@app-state_yasgui.html">@@app-state/yasgui</a></li><li><a href="module-@@constants_api.html">@@constants/api</a></li><li><a href="module-@@constants_entity-types.html">@@constants/entity-types</a></li><li><a href="module-@@constants_examples.html">@@constants/examples</a></li><li><a href="module-@@constants_languages.html">@@constants/languages</a></li><li><a href="module-@@constants_possible-prefixes.html">@@constants/possible-prefixes</a></li><li><a href="module-@@dom.html">@@dom</a></li><li><a href="module-@@localization.html">@@localization</a></li><li><a href="module-@@selectors.html">@@selectors</a></li><li><a href="module-@@storage.html">@@storage</a></li><li><a href="module-@@string.html">@@string</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Thu Jul 22 2021 19:49:31 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
